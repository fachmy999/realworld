const base = 'https://conduit.productionready.io/api';

function send({ method, path, data, token }) {
	const fetch = window.fetch;

	const opts = { method, headers: {} };

	if (data) {
		opts.headers['Content-Type'] = 'application/json';
		opts.body = JSON.stringify(data);
	}

	if (token) {
		opts.headers['Authorization'] = `Token ${token}`;
	}

	return fetch(`${base}/${path}`, opts)
		.then(r => r.text())
		.then(json => {
			try {
				return JSON.parse(json);
			} catch (err) {
				return json;
			}
		});
}

function get(path, token) {
	return send({ method: 'GET', path, token });
}

function del(path, token) {
	return send({ method: 'DELETE', path, token });
}

function post(path, data, token) {
	return send({ method: 'POST', path, data, token });
}

function put(path, data, token) {
	return send({ method: 'PUT', path, data, token });
}

export { put as a, del as d, get as g, post as p };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmsuMTFmNTBlMjAuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9ub2RlX21vZHVsZXMvYXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGJhc2UgPSAnaHR0cHM6Ly9jb25kdWl0LnByb2R1Y3Rpb25yZWFkeS5pby9hcGknO1xuXG5mdW5jdGlvbiBzZW5kKHsgbWV0aG9kLCBwYXRoLCBkYXRhLCB0b2tlbiB9KSB7XG5cdGNvbnN0IGZldGNoID0gcHJvY2Vzcy5icm93c2VyID8gd2luZG93LmZldGNoIDogcmVxdWlyZSgnbm9kZS1mZXRjaCcpLmRlZmF1bHQ7XG5cblx0Y29uc3Qgb3B0cyA9IHsgbWV0aG9kLCBoZWFkZXJzOiB7fSB9O1xuXG5cdGlmIChkYXRhKSB7XG5cdFx0b3B0cy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcblx0XHRvcHRzLmJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblx0fVxuXG5cdGlmICh0b2tlbikge1xuXHRcdG9wdHMuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYFRva2VuICR7dG9rZW59YDtcblx0fVxuXG5cdHJldHVybiBmZXRjaChgJHtiYXNlfS8ke3BhdGh9YCwgb3B0cylcblx0XHQudGhlbihyID0+IHIudGV4dCgpKVxuXHRcdC50aGVuKGpzb24gPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmV0dXJuIGpzb247XG5cdFx0XHR9XG5cdFx0fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXQocGF0aCwgdG9rZW4pIHtcblx0cmV0dXJuIHNlbmQoeyBtZXRob2Q6ICdHRVQnLCBwYXRoLCB0b2tlbiB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbChwYXRoLCB0b2tlbikge1xuXHRyZXR1cm4gc2VuZCh7IG1ldGhvZDogJ0RFTEVURScsIHBhdGgsIHRva2VuIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9zdChwYXRoLCBkYXRhLCB0b2tlbikge1xuXHRyZXR1cm4gc2VuZCh7IG1ldGhvZDogJ1BPU1QnLCBwYXRoLCBkYXRhLCB0b2tlbiB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHB1dChwYXRoLCBkYXRhLCB0b2tlbikge1xuXHRyZXR1cm4gc2VuZCh7IG1ldGhvZDogJ1BVVCcsIHBhdGgsIGRhdGEsIHRva2VuIH0pO1xufSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLElBQUksR0FBRyx3Q0FBd0MsQ0FBQzs7QUFFdEQsU0FBUyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRTtDQUM1QyxNQUFNLEtBQUssR0FBRyxBQUFrQixNQUFNLENBQUMsS0FBSyxBQUFnQyxDQUFDOztDQUU3RSxNQUFNLElBQUksR0FBRyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUM7O0NBRXJDLElBQUksSUFBSSxFQUFFO0VBQ1QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsR0FBRyxrQkFBa0IsQ0FBQztFQUNsRCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDakM7O0NBRUQsSUFBSSxLQUFLLEVBQUU7RUFDVixJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7RUFDakQ7O0NBRUQsT0FBTyxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUM7R0FDbkMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7R0FDbkIsSUFBSSxDQUFDLElBQUksSUFBSTtHQUNiLElBQUk7SUFDSCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDeEIsQ0FBQyxPQUFPLEdBQUcsRUFBRTtJQUNiLE9BQU8sSUFBSSxDQUFDO0lBQ1o7R0FDRCxDQUFDLENBQUM7Q0FDSjs7QUFFRCxBQUFPLFNBQVMsR0FBRyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUU7Q0FDaEMsT0FBTyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0NBQzVDOztBQUVELEFBQU8sU0FBUyxHQUFHLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRTtDQUNoQyxPQUFPLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7Q0FDL0M7O0FBRUQsQUFBTyxTQUFTLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRTtDQUN2QyxPQUFPLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0NBQ25EOztBQUVELEFBQU8sU0FBUyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUU7Q0FDdEMsT0FBTyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQzs7Ozs7In0=
